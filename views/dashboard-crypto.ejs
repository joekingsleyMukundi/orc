<!-- Mirrored from JK.M Ids.com/LuxurPay-django/layouts/dashboard-crypto.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 25 Sep 2024 13:48:55 GMT -->
<%- include('./includes/headers.ejs') %>
            <!-- ============================================================== -->
            <!-- Start right Content here -->
            <!-- ============================================================== -->
            <div class="main-content">

                <div class="page-content">
                    <div class="container-fluid">

                        <!-- start page title -->
                        <div class="row">
                            <div class="col-12">
                                <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                                    <h4 class="mb-sm-0 font-size-18">Crypto</h4>

                                </div>
                            </div>
                        </div>
                        <!-- end page title -->
                        <% if (successmessage.length> 0) { %>
                            <div class="alert alert-success text-center mb-4" role="alert">
                                <%= successmessage[0]%>.
                            </div>
                            <% } %>
                                <% if (errormessage.length> 0) { %>
                                    <div class="alert alert-danger text-center mb-4" role="alert">
                                        <%= errormessage[0]%>.
                                    </div>
                                    <% } %>

                        <div class="row">
                            <div class="col-xl-4">
                                <div class="card">
                                    <div class="card-body">
                                        <div>
                                            <div class="mb-4 me-3">
                                                <i class="mdi mdi-account-circle text-primary h1"></i>
                                            </div>

                                            <div>
                                                <h5><%= user.fullname %></h5>
                                                <p class="text-muted mb-1"><%= user.email %></p>
                                                <p class="text-muted mb-0">Id no: #<%= user._id %></p>
                                                
                                            </div>
                                        </div>
                                    </div>


                                    <div class="card-body border-top">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div>
                                                    <p class="fw-medium mb-2">Deposite Balance :</p>
                                                    <h4>KES <%= dashboard.depositeBalance %></h4>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="mt-4 mt-sm-0">
                                                    <p class="fw-medium mb-2">Coin :</p>
                                                    <div class="d-inline-flex align-items-center mt-1">
                                                        
                                                        <a href="javascript: void(0);" class="m-1">
                                                            <div class="avatar-xs">
                                                                <span class="avatar-title rounded-circle bg-warning bg-soft text-warning font-size-18">
                                                                    <i class="mdi mdi-bitcoin"></i>
                                                                </span>
                                                            </div>
                                                        </a>
                                                        <a href="javascript: void(0);" class="m-1">
                                                            <div class="avatar-xs">
                                                                <span class="avatar-title rounded-circle bg-primary bg-soft text-primary font-size-18">
                                                                    <i class="mdi mdi-ethereum"></i>
                                                                </span>
                                                            </div>
                                                        </a>
                                                        <a href="javascript: void(0);" class="m-1">
                                                            <div class="avatar-xs">
                                                                <span class="avatar-title rounded-circle bg-info bg-soft text-info font-size-18">
                                                                    <i class="mdi mdi-litecoin"></i>
                                                                </span>
                                                            </div>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card-footer bg-transparent border-top">
                                        <div class="text-center">
                                            <a href="javascript: void(0);" class="btn btn-outline-light me-2 w-md">Deposit</a>
                                            <a href="javascript: void(0);" class="btn btn-primary me-2 w-md">Buy / Sell</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-8">
                                <div class="card">
                                    <div>
                                        <div class="row">
                                            <div class="col-lg-9 col-sm-8">
                                                <div  class="p-4">
                                                    <h5 class="text-primary">Welcome Back !</h5>
                                                    <p> Crypto Dashboard</p>

                                                    <div class="text-muted">
                                                        <p class="mb-1"><i class="mdi mdi-circle-medium align-middle text-primary me-1"></i> Bitcoin</p>
                                                        <p class="mb-1"><i class="mdi mdi-circle-medium align-middle text-primary me-1"></i> Ethereum</p>
                                                        <p class="mb-0"><i class="mdi mdi-circle-medium align-middle text-primary me-1"></i> Litecoin</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-sm-4 align-self-center">
                                                <div>
                                                    <img src="assets/images/crypto/features-img/img-1.png" alt="" class="img-fluid d-block">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="card">
                                            <div class="card-body">
                                                <p class="text-muted mb-4"><i class="mdi mdi-bitcoin h2 text-warning align-middle mb-0 me-3"></i> Bitcoin </p>

                                                <div class="row">
                                                    <div class="col-6">
                                                        <div>
                                                            <h5>$<%= cryptoPrices.bitcoin.price  %></h5>
                                                            <p class="text-muted text-truncate mb-0"><%= cryptoPrices.bitcoin.changeAmount %> (<%= cryptoPrices.bitcoin.changePercent %>%) <i
                                                                class="mdi <%= cryptoPrices.bitcoin.changePercent >= 0 ? 'mdi-arrow-up text-success' : 'mdi-arrow-down text-danger' %> ms-1"></i>
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div>
                                                            <div id="area-sparkline-chart-1" data-colors='["--bs-warning"]' class="apex-charts"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="card">
                                            <div class="card-body">
                                                <p class="text-muted mb-4"><i class="mdi mdi-ethereum h2 text-primary align-middle mb-0 me-3"></i> Ethereum </p>

                                                <div class="row">
                                                    <div class="col-6">
                                                        <div>
                                                            <h5>$<%= cryptoPrices.ethereum.price   %></h5>
                                                            <p class="text-muted text-truncate mb-0">
                                                                <%= cryptoPrices.ethereum.changeAmount %>
                                                                    (<%= cryptoPrices.ethereum.changePercent %>%)
                                                                        <i
                                                                            class="mdi <%= cryptoPrices.ethereum.changePercent >= 0 ? 'mdi-arrow-up text-success' : 'mdi-arrow-down text-danger' %> ms-1"></i>
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div>
                                                            <div id="area-sparkline-chart-2" data-colors='["--bs-primary"]' class="apex-charts"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="card">
                                            <div class="card-body">
                                                <p class="text-muted mb-4"><i class="mdi mdi-litecoin h2 text-info align-middle mb-0 me-3"></i> litecoin </p>

                                                <div class="row">
                                                    <div class="col-6">
                                                        <div>
                                                            <h5>$<%= cryptoPrices.litecoin.price  %></h5>
                                                            <p class="text-muted text-truncate mb-0">
                                                                <%= cryptoPrices.litecoin.changeAmount %>
                                                                    (<%= cryptoPrices.litecoin.changePercent %>%)
                                                                        <i
                                                                            class="mdi <%= cryptoPrices.litecoin.changePercent >= 0 ? 'mdi-arrow-up text-success' : 'mdi-arrow-down text-danger' %> ms-1"></i>
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div>
                                                            <div id="area-sparkline-chart-3" data-colors='["--bs-info"]' class="apex-charts"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <!-- end row -->

                        <div class="row">
                            <div class="col-xl-12">
                                <div class="card">
                                    <div class="card-body">
                                        
                                        <h4 class="card-title mb-3">Wallet Balance</h4>

                                        <div class="row">
                                            <div class="col-lg-4">
                                                <div class="mt-4">
                                                    <p>Available Balance</p>
                                                    <h4>$ <%= wallet.totalBalance.toFixed(2) %>
                                                    </h4>

                                                    <div class="row">
                                                        <div class="col-6">
                                                            <div>
                                                                <p class="mb-2">Deposits</p>
                                                                <h5>KES <%= dashboard.depositeBalance %></h5>
                                                            </div>
                                                        </div>
                                                        <div class="col-6">
                                                            <div>
                                                                <p class="mb-2">Withdrowals</p>
                                                                <h5>KES <%= dashboard.withdrawals %></h5>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    
                                                </div>
                                            </div>

                                            <div class="col-lg-4 col-sm-6">
                                                <div>
                                                    <div id="wallet-balance-chart" data-colors='["--bs-primary", "--bs-warning", "--bs-info"]' class="apex-charts"></div>
                                                </div>
                                            </div>

                                            <div class="col-lg-4 col-sm-6 align-self-center">
                                                <!-- Ethereum Data -->
                                                <div>
                                                    <p class="mb-2">
                                                        <i class="mdi mdi-circle align-middle font-size-10 me-2 text-primary"></i> Ethereum
                                                    </p>
                                                    <h5>
                                                        <%=((wallet.balances.ethereum/127) /
                                                                    cryptoPrices.ethereum.price).toFixed(6) %> ETH =
                                                            <span class="text-muted font-size-14">KES <%= wallet.balances.ethereum %></span>
                                                    </h5>
                                                    <p class="text-muted text-truncate mb-0">
                                                        <%= cryptoPrices.ethereum.changeAmount %>
                                                            (<%= cryptoPrices.ethereum.changePercent %>%)
                                                                <i
                                                                    class="mdi <%= cryptoPrices.ethereum.changePercent >= 0 ? 'mdi-arrow-up text-success' : 'mdi-arrow-down text-danger' %> ms-1"></i>
                                                    </p>
                                                </div>
                                            
                                                <!-- Bitcoin Data -->
                                                <div class="mt-4 pt-2">
                                                    <p class="mb-2">
                                                        <i class="mdi mdi-circle align-middle font-size-10 me-2 text-warning"></i> Bitcoin
                                                    </p>
                                                    <h5>
                                                        <%=((wallet.balances.bitcoin/127) /
                                                                    cryptoPrices.bitcoin.price).toFixed(6)%> BTC =
                                                            <span class="text-muted font-size-14">KES <%= wallet.balances.bitcoin %></span>
                                                    </h5>
                                                    <p class="text-muted text-truncate mb-0">
                                                        <%= cryptoPrices.bitcoin.changeAmount %>
                                                            (<%= cryptoPrices.bitcoin.changePercent %>%)
                                                                <i
                                                                    class="mdi <%= cryptoPrices.bitcoin.changePercent >= 0 ? 'mdi-arrow-up text-success' : 'mdi-arrow-down text-danger' %> ms-1"></i>
                                                    </p>
                                                </div>
                                            
                                                <!-- Litecoin Data -->
                                                <div class="mt-4 pt-2">
                                                    <p class="mb-2">
                                                        <i class="mdi mdi-circle align-middle font-size-10 me-2 text-info"></i> Litecoin
                                                    </p>
                                                    <h5>
                                                        <%= ((wallet.balances.litecoin/127) /
                                                                    cryptoPrices.litecoin.price).toFixed(6)%> LTC =
                                                            <span class="text-muted font-size-14">KES <%= wallet.balances.litecoin %></span>
                                                    </h5>
                                                    <p class="text-muted text-truncate mb-0">
                                                        <%= cryptoPrices.litecoin.changeAmount %>
                                                            (<%= cryptoPrices.litecoin.changePercent %>%)
                                                                <i
                                                                    class="mdi <%= cryptoPrices.litecoin.changePercent >= 0 ? 'mdi-arrow-up text-success' : 'mdi-arrow-down text-danger' %> ms-1"></i>
                                                    </p>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- end row -->

                        <div class="row">
                            <div class="col-xl-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title mb-4">Crypto Market</h4>
                                        
                                        <div class="tab-content mt-4">
                                            <div class="tab-pane active" id="transactions-all-tab" role="tabpanel">
                                                <div class="table-responsive" data-simplebar style="max-height: 410px;">
                                                    <table class="table align-middle table-nowrap">
                                                        <tbody>
                                                            <% allTransactions.forEach(transaction=> { %>
                                                                <tr>
                                                                    <td style="width: 50px;">
                                                                        <div
                                                                            class="font-size-22 <%= transaction.transactionType === 'buy' ? 'text-primary' : 'text-danger' %>">
                                                                            <i
                                                                                class="bx bx-<%= transaction.transactionType === 'buy' ? 'down' : 'up' %>-arrow-circle"></i>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <div>
                                                                            <h5 class="font-size-14 mb-1">
                                                                                <%= transaction.transactionType==='buy' ? 'Buy' : 'Sell' %>
                                                                                    <%= transaction.cryptoType %>
                                                                            </h5>
                                                                            <p class="text-muted mb-0">
                                                                                <%= transaction.date.toDateString() %>
                                                                            </p>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <div class="text-end">
                                                                            <h5 class="font-size-14 mb-0">
                                                                                <% if (transaction.amount.toString().startsWith("0")) { %>
                                                                                    <%= transaction.amount %>
                                                                                        <% } else if (transaction.amount> 500) { %>
                                                                                            <%= ((transaction.amount / 127) / cryptoPrices.bitcoin.price).toFixed(6) %>
                                                                                                <%= transaction.cryptoType %>
                                                                                                    <% } else { %>
                                                                                                        <%= transaction.amount %>
                                                                                                        <%= transaction.cryptoType %>
                                                                                                            <% } %>
                                                                            </h5>

                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <% }) %>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <!-- Repeat similar structure for Buy and Sell tabs with buyTransactions and sellTransactions data respectively -->
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-xl-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title mb-4">Buy / Sell</h4>

                                        <ul class="nav nav-pills bg-light rounded" role="tablist">
                                            <li class="nav-item">
                                                <a class="nav-link active" data-bs-toggle="tab" href="#buy-tab" role="tab">Buy</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" data-bs-toggle="tab" href="#sell-tab" role="tab">Sell</a>
                                            </li>
                                        </ul>

                                        <div class="tab-content mt-4" style="min-height: 340px;">
                                            <div class="tab-pane active" id="buy-tab" role="tabpanel">
                                                <form action="/crypto_dashboard?type=Buy" method="POST">
                                                <div class="float-end ms-2">
                                                    <h5 class="font-size-14"><i class="bx bx-wallet text-primary font-size-16 align-middle me-1"></i> KES <%=dashboard.depositeBalance%></h5>
                                                </div>
                                                <h5 class="font-size-14 mb-4">Buy Coin</h5>

                                                <div class="form-group mb-3">
                                                    <label>Payment method :</label>
                                                    <select class="form-select">
                                                        <option>Deposit Balance</option>
                                                        <option disabled>Credit / Debit Card</option>
                                                        <option disabled>Paypal</option>
                                                    </select>
                                                </div>
                                                
                                                <div>
                                                    <label>Add Amount :</label>
                                                    <div class="input-group mb-3">
                                                        <label class="input-group-text">Amount</label>
                                                        <select class="form-select" name="cryptotype" style="max-width: 90px;" id="cryptoSelect">
                                                            <option value="BTC" selected>BTC</option>
                                                            <option value="ETH">ETH</option>
                                                            <option value="LTC">LTC</option>
                                                        </select>
                                                        <input type="text" class="form-control" name="amount" id="amountInput" placeholder="Enter KES amount">
                                                    </div>
                                                
                                                    <div class="input-group mb-3">
                                                        <label class="input-group-text">Price</label>
                                                        <input type="text" class="form-control" id="priceInput" readonly>
                                                        <label class="input-group-text">$</label>
                                                    </div>
                                                
                                                    <div class="input-group mb-3">
                                                        <label class="input-group-text">Total</label>
                                                        <input type="text" class="form-control" id="totalInput" readonly>
                                                    </div>
                                                </div>
                                                
                                                <div class="text-center">
                                                    <button type="submit" class="btn btn-success w-md">Buy Coin</button>
                                                </div>
                                                </form>
                                                
                                                <script>
                                                    // Function to fetch and display the price
                                                    const prices = {
                                                            BTC: "<%= cryptoPrices.bitcoin.price %>",
                                                            ETH: "<%= cryptoPrices.ethereum.price %>",
                                                            LTC: "<%= cryptoPrices.litecoin.price %>" };  // Example prices in USD

                                                        // Function to get the price based on the selected crypto
                                                        function fetchCryptoPrice(crypto) {
                                                            return prices[crypto];
                                                        }
                                                        let kesToUsdRate = null;
                                                    // Function to fetch the KES to USD exchange rate
                                                    async function fetchKesToUsdRate() {
                                                        try {
                                                            const response = await fetch('https://api.exchangerate-api.com/v4/latest/KES'); // Replace with actual API endpoint
                                                            const data = await response.json();
                                                            kesToUsdRate = data.rates.USD;
                                                            console.log("KES to USD Rate:", kesToUsdRate);
                                                        } catch (error) {
                                                            console.error("Failed to fetch KES to USD rate:", error);
                                                        }
                                                    }
                                                    // Calculate the total amount of cryptocurrency
                                                    async function calculateTotal() {
                                                        const crypto = document.getElementById('cryptoSelect').value;
                                                        const amount = parseFloat(document.getElementById('amountInput').value);

                                                        if (isNaN(amount) || amount <= 0) {
                                                            document.getElementById('totalInput').value = "";
                                                            return;
                                                        }
                                                         if (!kesToUsdRate) {
                                                            await fetchKesToUsdRate();
                                                        }

                                                        const price = await fetchCryptoPrice(crypto);
                                                        const amountUsd = (amount * kesToUsdRate).toFixed(2);

                                                        if (!price) {
                                                            document.getElementById('priceInput').value = "Price not available";
                                                            document.getElementById('totalInput').value = "";
                                                            return;
                                                        }

                                                        // Calculate crypto amount and update fields
                                                        const totalCrypto = (amountUsd / price).toFixed(8);


                                                        // Update price and total fields
                                                        document.getElementById('priceInput').value = price;
                                                        document.getElementById('totalInput').value = totalCrypto;
                                                    }

                                                    // Event listeners
                                                    document.getElementById('amountInput').addEventListener('input', calculateTotal);
                                                    document.getElementById('cryptoSelect').addEventListener('change', calculateTotal);

                                                    // Initial call to display the price for the default selected crypto
                                                    calculateTotal();
                                                </script>

                                            </div>
                                            <div class="tab-pane" id="sell-tab" role="tabpanel">
                                                <form action="/crypto_dashboard?type=Sell" method="post">
                                                    <div class="float-end ms-2">
                                                        <h5 class="font-size-14"><i class="bx bx-wallet text-primary font-size-16 align-middle me-1"></i>
                                                            <%= wallet.totalBalance.toFixed(2) %>
                                                        </h5>
                                                    </div>
                                                    <h5 class="font-size-14 mb-4">Sell Coin</h5>
                                            
                                                    <div>
                                                        <label>Sell Amount (KES):</label>
                                                        <div class="input-group mb-3">
                                                            <label class="input-group-text">Amount</label>
                                                            <input type="text"  name="amount" class="form-control" id="kesAmountInput" placeholder="Enter KES amount">
                                                        </div>
                                            
                                                        <div class="input-group mb-3">
                                                            <label class="input-group-text">Crypto Type</label>
                                                            <select class="form-select" name="cryptotype" style="max-width: 90px;" id="cryptoSelectSell">
                                                                <option value="BTC" selected>BTC</option>
                                                                <option value="ETH">ETH</option>
                                                                <option value="LTC">LTC</option>
                                                            </select>
                                                        </div>
                                            
                                                        <div class="input-group mb-3">
                                                            <label class="input-group-text">Price (USD)</label>
                                                            <input type="text" class="form-control" id="priceInputSell" readonly>
                                                            <label class="input-group-text">$</label>
                                                        </div>
                                            
                                                        <div class="input-group mb-3">
                                                            <label class="input-group-text">Total (Crypto)</label>
                                                            <input type="text" class="form-control" id="totalCryptoInput" readonly>
                                                        </div>
                                                    </div>
                                            
                                                    <div class="text-center">
                                                        <button type="submit" class="btn btn-danger w-md">Sell Coin</button>
                                                    </div>
                                                </form>
                                            
                                                <script>

                                                    // Fetch KES to USD exchange rate
                                                    async function fetchKesToUsdRate() {
                                                        try {
                                                            const response = await fetch('https://api.exchangerate-api.com/v4/latest/KES'); // Replace with your API endpoint
                                                            const data = await response.json();
                                                            kesToUsdRate = data.rates.USD;
                                                            console.log("KES to USD Rate:", kesToUsdRate);
                                                        } catch (error) {
                                                            console.error("Failed to fetch KES to USD rate:", error);
                                                        }
                                                    }
                                                      // Example prices in USD

                                                        // Function to get the price based on the selected crypto

                                                    // Function to get the price for the selected crypto in USD
                                                    function fetchCryptoPrice(crypto) {
                                                        const prices = {
                                                            BTC: "<%= cryptoPrices.bitcoin.price %>",
                                                            ETH: "<%= cryptoPrices.ethereum.price %>",
                                                            LTC: "<%= cryptoPrices.litecoin.price %>"
                                                        };; // Example prices; replace with dynamic data if needed
                                                        return prices[crypto];
                                                    }

                                                    // Calculate total crypto amount based on KES input
                                                    async function calculateTotalCrypto() {
                                                        const crypto = document.getElementById('cryptoSelectSell').value;
                                                        const kesAmount = parseFloat(document.getElementById('kesAmountInput').value);

                                                        if (isNaN(kesAmount) || kesAmount <= 0) {
                                                            document.getElementById('totalCryptoInput').value = "";
                                                            return;
                                                        }

                                                        // Ensure KES to USD rate is available
                                                        if (!kesToUsdRate) {
                                                            await fetchKesToUsdRate();
                                                        }

                                                        // Get crypto price in USD
                                                        const price = fetchCryptoPrice(crypto);
                                                        if (!price) {
                                                            document.getElementById('priceInputSell').value = "Price not available";
                                                            document.getElementById('totalCryptoInput').value = "";
                                                            return;
                                                        }

                                                        // Convert KES to USD
                                                        const usdAmount = (kesAmount * kesToUsdRate).toFixed(2);
                                                        // Calculate equivalent crypto amount
                                                        const totalCrypto = (usdAmount / price).toFixed(6);

                                                        // Update price and total fields
                                                        document.getElementById('priceInputSell').value = price;
                                                        document.getElementById('totalCryptoInput').value = totalCrypto;
                                                    }

                                                    // Event listeners for input and selection changes
                                                    document.getElementById('kesAmountInput').addEventListener('input', calculateTotalCrypto);
                                                    document.getElementById('cryptoSelectSell').addEventListener('change', calculateTotalCrypto);

                                                    // Initial fetch of KES to USD rate
                                                    fetchKesToUsdRate();
                                                </script>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- end row -->
                        
                    </div> <!-- container-fluid -->
                </div>
                <!-- End Page-content -->

                
                <footer class="footer">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-sm-6">
                                <script>document.write(new Date().getFullYear())</script> © LuxurPay.
                            </div>
                            <div class="col-sm-6">
                                <div class="text-sm-end d-none d-sm-block">
                                    Design & Develop by JK.M Ids
                                </div>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
            <!-- end main content-->

        </div>
        <!-- END layout-wrapper -->
<%- include('./includes/footer.ejs') %>